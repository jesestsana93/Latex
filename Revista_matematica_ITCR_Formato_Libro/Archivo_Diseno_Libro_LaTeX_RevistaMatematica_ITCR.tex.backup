%--------------------------------------------------------------------------
% Paquetes y estilo del libro. http://www.tec-digital.itcr.ac.cr/revistamatematica/
% Versión Juio-2014
%--------------------------------------------------------------------------
% Paquetes 
\usepackage[english,spanish,es-tabla]{babel}
\usepackage[latin1]{inputenc}                      % Entrada de acentos
\usepackage[T1]{fontenc}
\usepackage[autostyle, spanish = mexican]{csquotes}% manejo de comillas: " "
\MakeOuterQuote{"}
\usepackage{pslatex}                              % Fuentes finas postscript
%\usepackage[sc]{mathpazo}                         % Fuentes mathpazo
\usepackage{helvet}
\linespread{1.05}                                  % Fuente Palatino necesita espaciado
\usepackage[full]{textcomp}                        % Caracteres especiales como ' (recto)
\usepackage{xcolor}                                % Color: X11names (en el documentclass)
% COLORES personales---------------------------------------------------
    \definecolor{colortitulo}{RGB}{11,17,79} % 
    \definecolor{colordominante}{RGB}{11,17,79}
    \definecolor{colordominanteA}{RGB}{243,102,25}
    \definecolor{colordominanteF}{RGB}{219,68,14}
    \definecolor{colordominanteD}{RGB}{74,0,148}
   
    \definecolor{wcolornotas}{RGB}{74,0,148}%{RGB}{51,145,147} % 
    \definecolor{mostaza}{RGB}{231,196,25}
    \definecolor{amarilloM}{RGB}{248,199,90}
    \definecolor{amarilloD}{RGB}{251,237,121}
    \definecolor{azulF}{rgb}{.0,.0,.3}
    \definecolor{grisD}{rgb}{.3,.3,.3}
    \definecolor{grisF}{rgb}{.6,.6,.6}
    \definecolor{grisamarillo}{RGB}{248,248,245} 
    \definecolor{miverde}{RGB}{44,162,67}
    \definecolor{verdep}{RGB}{166,206,58}
    \definecolor{verdeF}{RGB}{5,92,8}
    \colorlet{mygray}{black!20}
    \newcommand{\verde}{\color{miverde}}
    \newcommand{\colornotas}{\color{wcolornotas}}
% Fin COLORES personales-------------------------------------------------
\usepackage{psboxit}
\usepackage{pstricks}
\usepackage{xparse}

\usepackage{tikz,tkz-tab}% Cajas de Teoremas, ejemplos, etc.
%listings para código en color en tcbcolor
\usetikzlibrary{matrix,arrows,
positioning,shadows,shadings,backgrounds,calc, shapes, tikzmark}%
\usepackage{tcolorbox, empheq} 
 % Librerías tcolorbox
\tcbuselibrary{skins,breakable,listings,theorems} 

\usepackage{xargs}                                 % Comandos con opciones
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
\usepackage{multicol}
% %\usepackage{epstopdf}% Conversión - Miktes 2.9 o inferior, TexLive 2009. o inferior
\usepackage[small,bf,labelsep=period]{caption}
\usepackage[breaklinks,colorlinks=true, pdfstartview=FitV, linkcolor=azulF, citecolor=azulF, urlcolor=azulF]{hyperref}
\usepackage{amsmath,amssymb,amsfonts,latexsym,cancel,stmaryrd}%
\usepackage[ruled,,vlined,lined,linesnumbered,algochapter]{algorithm2e}
\usepackage{framed}
\usepackage{titletoc}
\usepackage{calc}
\usepackage{longtable} 
\usepackage{colortbl} 
\usepackage{tabularx}
\usepackage{fancyvrb}
%\usepackage{minted}   %habilitar solo en Ubuntu (Linux)
\usepackage{array}
\usepackage{wasysym}
\usepackage{supertabular}
\definecolor{verbmentsbgcolor}{rgb}{0.9764, 0.9764, 0.9762}
\definecolor{verbmentscaptionbgcolor}{rgb}{0.1647, 0.4980, 1}
\usepackage{verbments}
\fvset{frame=bottomline,framerule=0.01cm}
\plset{language=java,texcl=true,style=vs,%
listingnamefont=\sffamily\bfseries\color{white},%
bgcolor=verbmentsbgcolor,captionfont=\sffamily\color{white},%
captionbgcolor=verbmentscaptionbgcolor, listingname=\textbf{Programa}}
%\usepackage{pagecolor}
\usepackage[textwidth=2cm]{todonotes} 
\usepackage{booktabs}
\usepackage{marginnote}
\usepackage[b]{esvect}
\usepackage{rotating}
%\usepackage{float}
\usepackage{floatrow}
\usepackage[shortlabels]{enumitem}
\usepackage{subfigure}
\usepackage{wrapfig}
\usepackage{floatflt}
 \usepackage{kantlipsum} %\kant[1-13]


%----------------------------------------------------------------------------------------
% Fuentes especiales
%----------------------------------------------------------------------------------------
% Comandos para fuentes especiales
\newcommandx*{\fnte}[4][1=pag,2=9,3=n]{{\color{azulF}\fontfamily{#1}\fontseries{b}
\fontsize{#2}{1}\fontshape{#3}\selectfont{#4}}}

\newcommandx*{\fntb}[4][1=pag,2=9,3=n]{{\color{azulF}\fontfamily{#1}\fontsize{#2}{1}\fontseries{b}\fontshape{#3}\selectfont{#4}}}

\newcommandx*{\fntg}[4][1=pag,2=9,3=n]{{\color{grisF}\fontfamily{#1}\fontsize{#2}{1}\fontshape{#3}\selectfont{#4}}}

\newcommand{\fhv}[2]{{\fontfamily{pag}\fontsize{#1}{1}\selectfont{#2}}}

\newcommand{\fhvb}[2]{{\fontfamily{pag}\fontseries{b}\fontsize{#1}{1}\selectfont{#2}}}

% fontfamily %n = normal, it =italics
\newcommandx*{\fntl}[4][1=pag,2=10,3=n]{{\colornotas\fontfamily{#1}\fontsize{#2}{1}\fontseries{b}\fontshape{#3}\selectfont{#4}}}

\newcommandx*{\tfntl}[4][1=pag,2=10,3=n]{{\color{azulF}\fontfamily{#1}\fontsize{#2}{1}\fontseries{b}\fontshape{#3}\selectfont{#4}}}

\newcommandx*{\fnt}[4][1=pag,2=9,3=n]{{\colornotas\fontfamily{#1}\fontsize{#2}{1}\fontshape{#3}\selectfont{#4}}}

\newcommandx*{\colrfnt}[4][1=pag,2=9,3=n]{{\red\fontfamily{#1}\fontsize{#2}{1}\fontshape{#3}\selectfont{#4}}}

\newcommandx*{\nfnt}[4][1=pag,2=9,3=n]{{\fontfamily{#1}\fontsize{#2}{1}\fontshape{#3}\selectfont{#4}}}

\newcommand{\wfont}[2]{{\fontfamily{#1}\selectfont{#2}}}
\newcommand{\fptm}[1]{{\fontfamily{ptm}\selectfont{#1}}}

\newcommandx*{\cfnte}[4][1=pag,2=9,3=n]{{\wcelestetxt\fontfamily{#1}\fontsize{#2}{1}\fontshape{#3}\selectfont{#4}}}
% Fin fuentes----------------------------------------------------------

%----------------------------------------------------------------------------------------
% Cabeceras
%----------------------------------------------------------------------------------------
% Elimina el encabezado de las páginas impares vacías al final de los capítulos
\makeatletter
\renewcommand{\cleardoublepage}{
\clearpage\ifodd\c@page\else
\hbox{}
\vspace*{\fill}
\thispagestyle{empty}
\newpage
\fi}
\makeatother

\usepackage{fancyhdr}
% Números de página en rectángulos y capítulo. Necesitamos posicionar los nodos
\usepackage[absolute]{textpos}
    \setlength{\TPHorizModule}{10mm}% 1 generic horizontal unit is equivalent to 10mm
    \setlength{\TPVertModule}{10mm}% 1 generic vertical unit is equivalent to 10mm
    \textblockorigin{0mm}{0mm}% top left corner set as origin

\makeatletter
%\renewcommand{\chaptermark}[1]{\markboth{\sffamily\normalsize\bfseries #1}{}}
% Redefinir \chaptermark sin "capítulo" ni número de capítulo, solo el texto.
\renewcommand{\chaptermark}[1]{\markboth{\if@mainmatter\ ~~\fi#1}{}}
\makeatother

%------------------------------------------------------------------------------
% Decoración de cabeceras 
% Texto en secciones
\renewcommand{\sectionmark}[1]{\markright{\sffamily\normalsize\thesection\hspace{5pt}#1}{}} 
% Configuración de fuentes para el número de página en el encabezado
\fancyhf{} 
% > OP 1: Todas las páginas con la sección a la izquierda
%   \fancyhead[LO,LE]{\rightmark} % L=Left, O=Odd y  E=Even pages
% > OP 2: Todas las páginas con la seción a la izquierda en un rectángulo (todo el header)
%   \usepackage{tikzpagenodes}
%   \fancyhead[LO,LE]{\rightmark
%   \begin{textblock}{1}(0,0)
%   \begin{tikzpicture}[remember picture,overlay]
%   \fill[grisamarillo] (current page.north west) 
%     rectangle
%   ([xshift=2pt,yshift=-3pt]current page.east|-current page header area.south east);
%   \end{tikzpicture}
%   \end{textblock}
%   }
% > OP 3: Todas las páginas con la seción a la izquierda en rectángulo bordes difusos
\usepackage{tikzpagenodes}
\usetikzlibrary{decorations.pathmorphing,calc,shadows.blur,shadings}
\pgfmathsetseed{1}

\pgfdeclaredecoration{irregular fractal line}{init}
{
  \state{init}[width=\pgfdecoratedinputsegmentremainingdistance]
  {
    \pgfpathlineto{\pgfpoint{random*\pgfdecoratedinputsegmentremainingdistance}{(random*\pgfdecorationsegmentamplitude-0.02)*\pgfdecoratedinputsegmentremainingdistance}}
    \pgfpathlineto{\pgfpoint{\pgfdecoratedinputsegmentremainingdistance}{0pt}}
  }
}

\tikzset{
   paper/.style={draw=black!10, blur shadow, shade=bilinear interpolation,
                 lower left=black!20, upper left=black!15, upper right=white, lower right=black!10},
   irregular border/.style={decoration={irregular fractal line, amplitude=0.2},
           decorate,
     },
   ragged border/.style={ decoration={random steps, segment length=7mm, amplitude=2mm},
           decorate,
   }
}
%L=Left, Odd Even - Decoración en encabezado
\fancyhead[LO,LE]{\rightmark {\color{grisF}
  \href{http://www.tec-digital.itcr.ac.cr/revistamatematica/}{\sffamily\normalsize   \;(http://www.tec-digital.itcr.ac.cr/revistamatematica/).}}
\begin{textblock}{1}(0,0)
\begin{tikzpicture}[remember picture,overlay]
  \fill[verdep,opacity=0.7]
        decorate[irregular border]{decorate{decorate{decorate{decorate[ragged border]{
        ($(current page header area.south east-|current page.east) - (0, random*5mm)$) -- ($(current page header area.south west-|current page.west) - (0, random*5mm)$)
        }}}}}
        -- (current page.north west) -- (current page.north east) -- cycle;
\end{tikzpicture}
\end{textblock}
}
% Fin decoración cabeceras

\renewcommand{\headrulewidth}{0pt}   % Ancho de la línea bajo el encabezado
\addtolength{\headheight}{2.5pt}     % Aumente el espacio alrededor de la cabecera 
\renewcommand{\footrulewidth}{0pt}   % Elimina la línea en el pie de página
% Estilo para  "pagestyle plain"
\fancypagestyle{plain}{\fancyhead{}\renewcommand{\headrulewidth}{0pt}} 



% Números de página+chaptertitle en rectángulo en el borde
\fancyfoot[LE]{
\begin{textblock}{3}(21,5)
\begin{tikzpicture}[overlay]
\node[draw=colordominante,
rectangle,minimum width=2cm, minimum height=2cm,
anchor=west,
fill=colordominante,font=\fontsize{25}{1}\sffamily\bfseries,inner sep=2pt,outer sep=2pt] 
at (-1.5cm,0pt){\textcolor{gray!10}{\thepage}};
%cap
\node[right,line width=1pt,rectangle,
fill=grisamarillo,font=\fontsize{35}{1}\sffamily\bfseries,inner sep=20pt,outer sep=60pt,
rotate=-90] at (current page.south west){\textcolor{gray!30}{\leftmark}};  
\end{tikzpicture}
\end{textblock}
}

\fancyfoot[RO]{
\begin{textblock}{3}(18,5)
\begin{tikzpicture}[overlay]
\node[draw=colordominante,rectangle,minimum width=2cm, minimum height=2cm,
anchor=west,
fill=colordominante,font=\fontsize{25}{1}\sffamily\bfseries,inner sep=2pt,outer sep=2pt] 
at (-1.5cm,0pt){\textcolor{gray!10}{\thepage}};
% %cap
% \node[left,line width=1pt,rectangle,
% fill=grisamarillo,font=\fontsize{35}{1}\sffamily\bfseries,inner sep=20pt,outer sep=60pt,
% rotate=90]at (current page.south west){\textcolor{gray!30}{\leftmark}};    
\end{tikzpicture}
\end{textblock}
}
% Fin cabeceras 

%----------------------------------------------------------------------------------------
% Color en los márgenes
%----------------------------------------------------------------------------------------
% \pagecolor{grisamarillo}
% \usepackage{eso-pic}
% \pagecolor{grisamarillo}
% \AddToShipoutPictureBG{%
%  \AtTextLowerLeft{\color{grisamarillo}%
%   \rule[-\footskip]{\textwidth}{\dimexpr\textheight+\footskip}}}

% Fin color márgenes


%----------------------------------------------------------------------------------------
% Prólogo
%----------------------------------------------------------------------------------------
\NewDocumentEnvironment{prologo}{O{}}{%
\chapter*{Prólogo}
\addcontentsline{toc}{schapter}{\addvspace{30pt}\large\sc\bfseries Prólogo \hfill \color{azulF}  }
\smallskip\smallskip
\begin{minipage}{0.9\textwidth}
 #1}{\end{minipage}}
 

%----------------------------------------------------------------------------------------
% Título
%----------------------------------------------------------------------------------------
\newcommand*{\titulo}[4]{\begingroup%
\raggedleft 
\vspace*{\baselineskip} % Espacio en blanco en la parte superior de la página
{\Large #1}\\[0.167\textheight] % Autor
{\LARGE\bfseries #2}\\[\baselineskip] % pre-título
{\textcolor{colortitulo}{\Huge #3}}\\[\baselineskip] % Título
{\Large \textit{#4}}\par % Descripción adicional

\vfill % Espacio en blanco entre el bloque de título y "la editorial"

{\raggedright
\begin{minipage}[c]{0.08\textwidth}
\raisebox{-2.0cm}{\includegraphics[width=1.4cm]{images/logo}}
 \end{minipage}
\  \ \hfill\begin{minipage}[t]{0.9\textwidth}
{\color{gray}
 \fhv{9}{Revista digital}\\
 \fhvb{9}{\color{azulF}Matemática, Educación e Internet.}
  \fntg[pag][8]{\color{grisF}
  \href{http://www.tec-digital.itcr.ac.cr/revistamatematica/}{(http://www.tec-digital.itcr.ac.cr/revistamatematica/).}}}
\end{minipage}          
}%raggedright
\vspace*{3\baselineskip} % Espacio en blanco antes del final de página
\endgroup}
% Fin Titulo--------------------------------------------------------


%----------------------------------------------------------------------------------------
% Copypright, ISBN, ...
%----------------------------------------------------------------------------------------
\def\copyrightpage{\thispagestyle{empty}%
\vbox to\textheight\bgroup\vfill\obeylines\obeyspaces\xcopyrightpage}

\def\xcopyrightpage#1#2\end#3{\scriptsize\parindent=0pt
Copyright\copyright{#1} 
\vskip40pt
#2\vskip200pt\egroup\endgroup}
\let\endcopyrightpage\relax


%Imprimir info  al pie de página
\makeatletter 
\newif\ifoffprintinfo
\def\dooffprintinfo{\global\offprintinfotrue}

\def\copyrightyear#1{\def\thecopyrightyear{#1}}

\copyrightyear{\the\year}

\def\dofnote#1#2{\vtop{\hyphenpenalty=10000
\advance\hsize -10pt \raggedright
\footnotesize{\it #1. }{ #2}\\
\noindent\hbox{\footnotesize
Derechos Reservados \copyright\ \thecopyrightyear\ Revista digital Matem\'atica, Educaci\'on e Internet
 ({\scriptsize\tt www.tec-digital.itcr.ac.cr/revistamatematica/)}}}}

\def\offprintinfo#1#2{
\def\theoffprint{\bgroup\frenchspacing
\dofnote{#1}{#2}
\egroup}}

\def\x@makefntext#1{
\kern-3\p@
\hrule\@width.4\columnwidth
\kern2.6\p@
\vrule height 9pt width0pt \relax
#1}

\def\offprintinfoerror{\typeout{^^J^^J
!! Debe poner {\string\offprintinfo\string{(Title,
Edition)\string}\string{(Author)\string}^^J en el inicio del documento.!!^^J^^J}}
\bgroup
\x@makefntext{Debe poner {\tt \string\offprintinfo\string{(Title,
Edition)\string}\string{(Author)\string}\newline en el inicio del documento.\vrule depth8pt width0pt}\egroup}}


\def\printoffprintinfo{\vtop to0pt{%
\hsize=\textwidth\footnotesize
\expandafter\ifx\csname theoffprint\endcsname\relax
\offprintinfoerror\else\theoffprint\fi\vskip1sp\vss}}


\def\@xfootnote[#1]{%
  \protected@xdef\@thefnmark{#1}%
  \@footnotemark\@footnotetext}
\makeatother

% Uso: \inforevista{Edición de Textos Científicos con LaTeX}{Walter Mora F., Alex Borbón A.}
\newcommand{\inforevista}{\protect\footnote[ ]{\printoffprintinfo}}


% Fin Copyright

%----------------------------------------------------------------------------------------
% CONTENIDO 
%----------------------------------------------------------------------------------------

%\usepackage{titletoc}
\contentsmargin{0cm}
\titlecontents{chapter}[0pc]
{\addvspace{30pt}%
  \begin{tikzpicture}[remember picture, overlay]%
  \draw[fill=verdep!70,draw=verdep!70] (-4,-.1) rectangle (-0.1,0.5);%
  \pgftext[left,x=-1.5 cm,y=0.2cm]{\color{azulF}\Huge\sc\bfseries \thecontentslabel};%
  \end{tikzpicture}\color{azulF}\large\sc\bfseries%
}%
{}
{}
%{\;\color{verdep!70}\titlerule\;\color{azulF}\large\sc\bfseries Página \thecontentspage
{\;\color{verdep!70}\titlerule\;\color{azulF}\large\sc\bfseries \thecontentspage
\begin{tikzpicture}[remember picture, overlay]
\draw[fill=verdep!70,draw=verdep!70] (1pt,0) rectangle (6,0.1pt);
\end{tikzpicture}}%

\titlecontents{section}[2.4pc]
{\addvspace{1pt}}
{\contentslabel[\color{azulF}\thecontentslabel]{2.4pc}}
{}
{\hfill\small \color{azulF}\thecontentspage}
[]
\titlecontents*{subsection}[4pc]
{\addvspace{-1pt}\small}
{}
{}
{\hfill\small \color{azulF}\thecontentspage}
[\\][]

\makeatletter
\renewcommand{\tableofcontents}{%
\chapter*{%
\vspace*{-20\p@}%
\begin{tikzpicture}[remember picture, overlay]%
\pgftext[right,x=15cm,y=0.2cm]{\color{azulF}\Huge\sc\bfseries \contentsname};%
\draw[fill=verdep!70,draw=verdep!70] (13,-1) rectangle (20,1.75);%
\clip (13,-1) rectangle (20,1.75);
%\pgftext[right,x=15cm,y=0.2cm]{\color{white}\Huge\sc\bfseries \contentsname};%
\pgftext[right,x=15cm,y=0.2cm]{\color{azulF}\Huge\sc\bfseries \contentsname};%
\end{tikzpicture}}%
\@starttoc{toc}}
\makeatother
% Fin Contenido 

%----------------------------------------------------------------------------------------
% CAPITULO Estilo simple
%----------------------------------------------------------------------------------------

\usepackage{titlesec}
\newcommand{\hsp}{\hspace{15pt}}
\titleformat{\chapter}[hang]{\huge\bfseries}{{
        \fontsize{6em}{6em}\selectfont\black
        \thechapter}\hsp\textcolor{verdep}{\vrule height 4em width 2pt}\hsp}{0pt}{\huge\bfseries}
% Subir el título
%\titlespacing*{\chapter}{0cm}{-\topskip}{0pt}[0pt]        


%----------------------------------------------------------------------------------------
%	Numeración de las secciones -- en el margen
%----------------------------------------------------------------------------------------

\makeatletter
\renewcommand{\@seccntformat}[1]{\llap{\textcolor{verdeF}{\csname the#1\endcsname}\hspace{1em}}}                    
\renewcommand{\section}{\@startsection{section}{1}{\z@}
{-4ex \@plus -1ex \@minus -.4ex}
{1ex \@plus.2ex }
{\color{azulF}\normalfont\huge\sffamily\bfseries}}
\renewcommand{\subsection}{\@startsection {subsection}{2}{\z@}
{-3ex \@plus -0.1ex \@minus -.4ex}
{0.5ex \@plus.2ex }
{\normalfont\sffamily\bfseries}}
\renewcommand{\subsubsection}{\@startsection {subsubsection}{3}{\z@}
{-2ex \@plus -0.1ex \@minus -.2ex}
{0.2ex \@plus.2ex }
{\normalfont\small\sffamily\bfseries}}                        
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}
{-2ex \@plus-.2ex \@minus .2ex}
{0.1ex}
{\normalfont\small\sffamily\bfseries}}
\makeatother
% Fin numeración secciones



%---------------------------------------------------------------------------------
%  Entornos:  Ejemplo, teorema, proposición, lema, lista de ejercicios, 
%             caja interludio, caja simple  
%---------------------------------------------------------------------------------

%  Cajas con el paquete  tcbcolor
%  CONTADORES: ejemplo, definicion, lema, teorema, corolario, proposicion,ejercicio 
\newcounter{tcbteo}[chapter]
\renewcommand{\thetcbteo}{\thechapter.\arabic{tcbteo}}

\newcounter{tcbdefi}[chapter]
\renewcommand{\thetcbdefi}{\thechapter.\arabic{tcbdefi}}

\newcounter{tcblema}[chapter]
\renewcommand{\thetcblema}{\thechapter.\arabic{tcblema}}

\newcounter{tcbcoro}[chapter]
\renewcommand{\thetcbcoro}{\thechapter.\arabic{tcbcoro}}

%  \newcounter{tcbListaEjercicios}[chapter]
%  \renewcommand{\thetcbListaEjercicios}{\thechapter.\arabic{tcbListaEjercicios}}

\newcounter{tcbpropo}[chapter]
\renewcommand{\thetcbpropo}{\thechapter.\arabic{tcbpropo}}

\newlength{\examlen}
\tikzset{
    wnodeTeorema/.style={%
         rectangle,  top color=gray!5, bottom color=gray!5,
         inner sep=1mm,anchor=west,font=\small\bf\sffamily},
   wnodeminimo/.style={%
         rectangle,  top color=white, bottom color=white,
         text=azulF,inner sep=1mm,anchor=west,font=\small\bf\sffamily}      
}



%\begin{teorema}  o \begin{teorema}[de tal] o \begin{teorema}[][ref]
% Teorema -----------------------------------------------------
\newtcolorbox{wwteorema}[3][]{%
arc=0mm,breakable,enhanced,colback=gray!5,boxrule=0pt,top=7mm,
drop fuzzy shadow,
fontupper=\normalsize,step and label={tcbteo}{#3},
% Caso normal, sin quiebres
overlay unbroken ={%
\draw[color=colordominanteD,line width=0.2pt] (frame.north west)--([xshift=0pt]frame.north east);
%Caja de Título: teo --
\node[wnodeTeorema](tituloteo) at ([xshift=0pt, yshift=-4mm]frame.north west)
{\textbf{\color{colordominanteD} Teorema \thetcbteo \;#2}};
%Borde superior --
\draw[colordominanteD,line width=2.5cm] ([xshift=1.25cm, yshift=0cm]frame.north west)-- +(\examlen,3pt);
},
% Caso de quiebre por cambio de página
overlay first = {%
\draw[color=colordominanteD,line width=0.2pt] (frame.north west)--([xshift=0pt]frame.north east);
%Caja de Título: teo --
\node[wnodeTeorema](tituloteo) at ([xshift=0pt, yshift=-4mm]frame.north west)
{\textbf{\color{colordominanteD} Teorema \thetcbteo \;#2}};
%Borde superior --
\draw[colordominanteD,line width=2.5cm] ([xshift=1.25cm, yshift=0cm]frame.north west)-- +(\examlen,3pt);
                }, 
overlay middle={},                
% Mantener borde en cambio de página 
overlay last = {\draw[color=colordominanteD,line width=0.2pt] (frame.north west)--([xshift=0pt]frame.north east);
                } 
#1}
%-
\NewDocumentEnvironment{teorema}{O{} O{} O{}}{\smallskip\begin{wwteorema}{#1}{#2}%
 #3}{\end{wwteorema}\smallskip }
% TEOREMA---------------------------------------------------------



%\begin{proposicion}  o \begin{proposicion}[de tal] o \begin{proposicion}[][ref]
% Proposición-----------------------------------------------------
\newtcolorbox{wwpropo}[3][]{%
arc=0mm,breakable,enhanced,colback=gray!5,boxrule=0pt,top=7mm,
fontupper=\normalsize,step and label={tcbpropo}{#3},
% Caso normal, sin quiebres
overlay unbroken ={%
\draw[color=colordominante,line width=0.2pt] (frame.north west)--([xshift=0pt]frame.north east);        
%Caja de Título: propo --
\node[wnodeTeorema](tituloteo) at ([xshift=0pt, yshift=-4mm]frame.north west)
{\textbf{\color{colordominante} Proposición \thetcbpropo\;#2}};
%Borde superior --
\draw[colordominante,line width=2.5cm] ([xshift=1.25cm, yshift=0cm]frame.north west)-- +(\examlen,3pt);
%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);
},
overlay first ={%
\draw[color=colordominante,line width=0.2pt] (frame.north west)--([xshift=0pt]frame.north east);        
%Caja de Título: propo --
\node[wnodeTeorema](tituloteo) at ([xshift=0pt, yshift=-4mm]frame.north west)
{\textbf{\color{colordominante} Proposición \thetcbpropo\;#2}};
%Borde superior --
\draw[colordominante,line width=2.5cm] ([xshift=1.25cm, yshift=0cm]frame.north west)-- +(\examlen,3pt);
}, %
overlay middle={%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);},
% Mantener borde en cambio de página 
overlay last ={\draw[color=colordominante,line width=0.2pt] (frame.north west)--([xshift=0pt]frame.north east);
        }
#1}
%-
\NewDocumentEnvironment{proposicion}{O{} O{} O{}}{\smallskip\begin{wwpropo}{#1}{#2}%
 #3}{\end{wwpropo}\smallskip }
% ---------------------------------------------------------



% LEMA -----------------------------------------------------------
 \newtcolorbox{wwlema}[3][]{%
arc=0mm,breakable,enhanced,colback=gray!5,boxrule=0pt,
top=1mm, left=3pt,
step and label={tcblema}{#3},
fontupper={\small\bf\sffamily {\color{azulF}Lema \thetcblema \;#2}}~\normalfont, %"Lema..."+texto del cuerpo
overlay unbroken ={%
%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);
},
overlay first  = {%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);
},     
overlay middle={%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);}, 

% Mantener borde en cambio de página     
overlay last ={\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);   }    
#1}
%-
\NewDocumentEnvironment{lema}{O{} O{} O{}}{\smallskip\begin{wwlema}{#1}{#2}%
#3}{\end{wwlema}\smallskip }
%LEMA--------------------------------------------------------------


% % Corolario -------------------------------------------------------
\newtcolorbox{wwcoro}[2][]{%
arc=0mm,breakable,enhanced,colback=gray!5,boxrule=0pt,
top=1mm,left=3pt,
fontupper={\small\bf\sffamily {\color{azulF}Corolario \thetcbcoro}\;}~\normalfont, 
step and label={tcbcoro}{#2},
overlay unbroken ={%
%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);  
},
overlay first  = {%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);                 
        },%
overlay middle={%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);},        
% Mantener borde en cambio de página     
overlay last ={\draw[color=gray,line width=3pt] 
                     ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);
              }     
#1}
%-
\NewDocumentEnvironment{corolario}{O{} O{}}{\smallskip\begin{wwcoro}{#1}%
}{\end{wwcoro}\smallskip }
% Corolario------------------------------------------------------


% % Definición---------------------------------------------------
\newtcolorbox{wwdefinicion}[3][]{%
arc=0mm,breakable,enhanced,colback=gray!5,boxrule=0pt,drop fuzzy shadow,
top=6mm,fontupper=\normalsize,step and label={tcbdefi}{#3},
overlay unbroken ={%
%barra vertical
\draw[color=colordominanteA,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);                           
%Caja de Título: defi --
\node[wnodeTeorema](titulodefi) at ([xshift=4.5pt, yshift=-3mm]frame.north west)
{\textbf{Definición \thetcbdefi \;#2}};
},
overlay first  = {
%barra vertical
\draw[color=colordominanteA,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);                         
%Caja de Título: defi --
\node[wnodeTeorema](titulodefi) at ([xshift=4.5pt, yshift=-3mm]frame.north west)
{\textbf{Definición \thetcbdefi \;#2}};
                }, %overlay
% Mantener borde en cambio de página
overlay middle={%barra vertical
\draw[color=colordominanteA,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west); 
}, 
overlay last    = {%barra vertical
\draw[color=colordominanteA,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);}
#1}
%-
\NewDocumentEnvironment{definicion}{O{} O{} O{}}{\smallskip\begin{wwdefinicion}{#1}{#2}%
 #3}{\end{wwdefinicion}\smallskip }
% %DEFINICION---------------------------------------------------------


% Caja para Ejemplo --------------------------------------------------
\newcounter{tcbejem}[chapter]
\renewcommand{\thetcbejem}{\thechapter.\arabic{tcbejem}}
\colorlet{colorfondoejemplo}{gray!5}
\definecolor{colorejemplo}{rgb}{.0,.0,.3}
% Ejemplo
\newtcolorbox{wwejemplo}[3][]{%
arc=0mm,
breakable,drop fuzzy shadow,
enhanced,
colback=grisamarillo,
boxrule=0pt,
top=8mm, %Separación vertical - inicia texto
enlarge top by=\baselineskip/2+1mm,
enlarge top at break by=0mm,pad at break=2mm,
fontupper=\normalsize,
step and label={tcbejem}{#3},
overlay unbroken={%barra vertical
\draw[color=verdep,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);                            
% Caja de imagen Ejemplo
\node[rectangle, 
         text=black, 
         inner sep=1mm,anchor=west,font=\small\bf\sffamily] at ([xshift=-14.3pt,yshift=-4.1mm]frame.north west)%
{\includegraphics{images/nodoejemplo}\raisebox{0.5cm}{}};
% Caja numeración y descripción
\node[rectangle, 
 text=black, 
 inner sep=1mm,
 anchor=west,
 font=\normalsize] at ([xshift=1.1cm,yshift=-2.9mm]frame.north west)%
 {\fhvb{10}{\;\thetcbejem \;\;\;#2}}; }, % overlay
overlay first  = {%
%barra vertical
\draw[color=verdep,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);                            
% Caja de imagen Ejemplo
\node[rectangle, 
         text=black, 
         inner sep=1mm,anchor=west,font=\small\bf\sffamily] at ([xshift=-14.3pt,yshift=-4.1mm]frame.north west)%
{\includegraphics{images/nodoejemplo}\raisebox{0.5cm}{}};
% Caja numeración y descripción
\node[rectangle, 
 text=black, 
 inner sep=1mm,
 anchor=west,
 font=\normalsize] at ([xshift=1.1cm,yshift=-2.9mm]frame.north west)%
 {\fhvb{10}{\;\thetcbejem \;\;\;#2}};
 },%overlay first    
%Borde cambio de páginas
overlay middle={%barra vertical
\draw[color=verdep,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west); },
overlay last={%barra vertical
\draw[color=verdep,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west); }
#1}
%-
\NewDocumentEnvironment{ejemplo}{O{} O{} O{}}{\smallskip\begin{wwejemplo}{#1}{#2}%
 #3}{\end{wwejemplo}\smallskip }
%EJEMPLO-----------------------------------------------------------------



% CAJA de comentario-----------------------------------------------------
\definecolor{colrnodocaja}{RGB}{44,91,144}
\definecolor{colrfondocaja}{RGB}{241,241,227}
%CAJA de comentario ------------------------------------------------------
\newtcolorbox{wwcaja}[2][]{%
arc=0mm,breakable,%drop fuzzy shadow,
enhanced,colback=gray!4,
boxrule=0pt,
top=3mm, %Separación vertical - inicia texto
enlarge top by=\baselineskip/2+1mm,
enlarge top at break by=0mm,pad at break=2mm,
fontupper=\normalsize,
%step and label={tcbca}{#3},
overlay unbroken ={%
\draw[color=gray!2,line width=0.2pt] (frame.north west)
  --([xshift=0pt]frame.north east)
  --([xshift=0pt]frame.south east)
  --([xshift=0pt]frame.south west)--(frame.north west);
% Caja de Título CAJA
\node[ rectangle, %minimum width=0cm, minimum height=0.0cm,
         top color=amarilloD, bottom color=amarilloD,
         inner sep=0.5mm,anchor=west,font=\normalsize]at ([xshift=-0.5pt,  yshift=2.30mm]frame.north west){\fnte[pag][10]{ \bf #2}};
},
%Borde
overlay first={\draw[color=gray!2,line width=0.2pt] (frame.north west)
  --([xshift=0pt]frame.north east)
  --([xshift=0pt]frame.south east)
  --([xshift=0pt]frame.south west)--(frame.north west);
% Caja de Título CAJA
\node[ rectangle, %minimum width=0cm, minimum height=0.0cm,
         top color=amarilloD, bottom color=amarilloD,
         inner sep=0.5mm,anchor=west,font=\normalsize]at ([xshift=-0.5pt,  yshift=2.30mm]frame.north west){\fnte[pag][10]{ \bf #2}};
         },
overlay middle={},         
%Borde cambio de página
overlay last={\draw[color=gray!2,line width=0.2pt] (frame.north west)
  --([xshift=0pt]frame.north east)
  --([xshift=0pt]frame.south east)
  --([xshift=0pt]frame.south west)--(frame.north west);}
#1}
%-
\NewDocumentEnvironment{caja}{O{} O{}}{\smallskip\begin{wwcaja}{#1}%
 #2}{\end{wwcaja}\smallskip }
% CAJA de comentario

% Fin mis entornos---------------------------------------------------------------


%---------------------------------------------------------------------------------
%  Listas con Tikz 
%---------------------------------------------------------------------------------
% Puntos Tikz y  Enumerate con  Tikz 
  \newcommand{\tpto}{\tikz \shadedraw [shading=ball] (0,0) circle (.1cm);}
  

  
  \newcommand{\ptocel}[1]{\begin{tikzpicture}
  	\node[scale=.6, circle, shade, ball color=DeepSkyBlue1]  {\color{black}\Large\textbf#1};
  	 \end{tikzpicture}}
  
  \newcommand{\ttpto}[1]{\begin{tikzpicture}
  	\node[scale=.5, circle, shade, ball color=blue]  {\color{white}\Large\textbf#1};
  \end{tikzpicture}}
  \newcommand{\ttptov}{\begin{tikzpicture}
  	\node[scale=.5, circle, shade, ball color=green]  {\color{white}\Large\textbf.};
  \end{tikzpicture}}
  \newcommand{\ttptor}{\begin{tikzpicture}
  	\node[scale=.5, circle, shade, ball color=red]  {\color{white}\Large\textbf.};
  \end{tikzpicture}}
  \newcommand{\ptoazul}[1]{\begin{tikzpicture}
  	\node[scale=.5, circle, shade, ball color=blue]  {\color{white}\Large\textbf#1};
  \end{tikzpicture}}
 \newcommand{\ptomb}{\ptoazul$\;$}
 \newcommand{\itempto}{\item[\tpto]}
 \newcommand{\pto}{\tpto}
 \newcommand{\ptom}{\tpto$\;$}
 \newcommand{\ptomv}{\ttptov$\;$}
 \newcommand{\ptomr}{\ttptor$\;$}

 % Listas -- con puntos
 \usepackage{enumitem}
 %\usepackage{enumerate}
 \newcommand{\witem}[1]{\item[{\bf #1)}]}
 
 \newcommand*{\itembolasgrises}[1]{%
 \footnotesize\protect\tikz[baseline=-3pt]%
 \protect\node[fill=gray!50,shape=circle,draw,inner sep=1.2pt,line width=0.2mm](n1){#1};}
 \newcommand*{\itembolasazules}[1]{%
 \footnotesize\protect\tikz[baseline=-3pt]%
 \protect\node[scale=.5, circle, shade, ball color=blue]  {\color{white}\huge\bf#1};}
 \newcommand*{\itembolasverdes}[1]{%
 \footnotesize\protect\tikz[baseline=-3pt]%
 \protect\node[scale=.5, circle, shade, ball color=green]  {\color{white}\Large\bf#1};}
 \newcommand*{\itembolasrojas}[1]{%
  \footnotesize\protect\tikz[baseline=-3pt]%
  \protect\node[scale=.5, circle, shade, ball color=red]  {\color{white}\Large\bf#1};}
  
%Comando para listas con bolas	
\newcommand{\beaz}{\begin{enumerate}[label=\itembolasazules{\arabic*}]}
\newcommand{\eeaz}{\end{enumerate}}
% Fin de cosas adicionales -


%-----------------------------------------------------------------------------
% TABLAS CON Tikz
%----------------------------------------------------------------------------- 
\usepackage{array}
\usetikzlibrary{calc,fit,shadows,arrows,positioning}
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}
%--
%------------------------------------------------------------------------------
% Data Table
%------------------------------------------------------------------------------
\newsavebox{\dataTableContent} % Box
\newenvironment{dataTable}[1] % \new environment
{%
\begin{lrbox}{\dataTableContent}%
\begin{tabular}{#1}}%
%
{%
\end{tabular}
\end{lrbox}
\begin{tikzpicture}
\node [inner xsep=0pt] (tbl){\usebox{\dataTableContent}};
\begin{pgfonlayer}{background}
% table
\draw[rounded corners=1pt,top color=gray!1,bottom color=gray!30,draw=black]
(tbl.north east) rectangle (tbl.south west);
% top line
\draw[rounded corners=1pt,top color=gray!10!black,bottom color=gray!50!black,draw=black]%
($(tbl.north west)$) rectangle ($(tbl.north east)-(0,1.5\baselineskip)$);
% bottom rule
\draw[rounded corners=0.25pt,fill=gray,draw=black]%
(tbl.south west) rectangle ($(tbl.south east)+(0,0.05)$);
\end{pgfonlayer}
\end{tikzpicture}}
% --



% Ejemplos de entornos--------------------------------------------------------------
 \newcounter{midefi}[chapter] % Contador
 \renewcommand{\themidefi}{{\red\thechapter.\arabic{midefi}}} % 1.1, 1.2,...
 
 \NewDocumentEnvironment{midefinicion}{O{} O{}}{%
  %Inicio del entorno
 \bigskip
 \begin{minipage}{\textwidth}
   % Definición - número - descripción (opcional)
 \textbf{Definición \;\themidefi \;{\small\sffamily #1}}  
    % Parámetro #1: Contenido del entorno
   
 }{% Fin del entorno 
#2
    \end{minipage}
    \bigskip 
  }
  
 
 %---------------------------------------Matrices iluminadas------------------------
 %\usetikzlibrary{matrix,backgrounds}
\pgfdeclarelayer{wfondo}
\pgfsetlayers{wfondo,background,main}  
\NewDocumentCommand{\iluminar}{O{blue!40} m m}{%
\draw[#1, fill=#1] (#2.north west) rectangle (#3.south east);
}
% Ejemplos de entornos--------------------------------------------------------------




%----------------------------------------------------------------------------------------
%---------------------------------------------------------------------------------
%  Código de programas (LaTeX en ese caso) con Listings
%---------------------------------------------------------------------------------
% Listings
\usepackage{listings}% uso: \lstinline|section| y \begin{lstlisting}... \end{lstlisting}
\usepackage[scaled=0.83]{beramono} % para font \ttfamily en lstlisting
\lstset{ %
	      language={[LaTeX]TeX}, % lenguaje
	      basicstyle=\bfseries\ttfamily,
	      keywordstyle=\color{blue},
	      commentstyle=\color{brown},	   
	      backgroundcolor=\color{gray!15},
	      showstringspaces=false,
	      flexiblecolumns=true,
	      stringstyle=\ttfamily\color{blue},
	      extendedchars=true,	     
emph={rm,bf,it,sf,sl,sc,tt,gtrdot,lesseqqgtr,fcolorbox,color,
blue,overset,iint,iiint,newtheoremstyle,
boldsymbol,pmb,subsubsection,subsection,rowcolor,cellcolor,label, toprule, midrule,bottomrule,hline,includegraphics,figure,total,left, top,
Supset,mathbb,gtrless,doteqdot,sqsubset,mathbb,eqslantless,tcbuselibrary,usetikzlibrary,NewDocumentEnvironment,NewDocumentCommand,tcbset,CajaconCapas, opteqA,opteqB,opteqC,opteqD,opteqE,cajaD, overlay, first, middle, last, unbroken,
risingdotseq,sqsupset,mathbb,lesssim,fallingdotseq,succcurlyeq,miEjemplo,
white,red,xshift,yshift,enhanced,theoremstyle,theorembodyfont,
theoremheaderfont,setlength,mdfamily,usepackage,fancyfoot,fancyhf, fancyhdr,textblock,fancyhead,href,tikzpagenodes,usetikzlibrary,
thmname,thmnumber,thmnote, definecolor,exer, exera, answer,subanswer,exercises,subexera,
chapter,eexer,
therefore,lessapprox,circeq,preccurlyeq,because,approxeq,triangleq,
curlyeqprec,leqq,lessdot,thicksim,curlyeqsucc,geqq,gtreqless,thickapox,
precsim,leqslant,gtreqqless,backsim,succsim,geqslant,lll,backsimeq,
precapprox,eqslantgtr,ggg,subseteqq,succapprox,gtrsim,lessgtr,supseteqq,
vartriangleright,gtrapprox,lesseqgtr,Subset,trianglerighteq,maxint,for,to,do
},     
emphstyle={\color{blue}\textbf}, % Color de caracteres especiales
literate=%
   *{$}{{{\color{red}\$}}}1
    {$$}{{{\color{red}\$\$}}}1
    {captionof}{{{\color{red}captionof}}}1
    {scale}{{{\color{red}scale}}}1
    {width}{{{\color{red}width }}}1
    {angle}{{{\color{red}angle}}}1
    {height}{{{\color{red}height }}}1
    {textwidth}{{{\color{red}textwidth}}}1
    {draw}{{{\color{red}draw}}}1
    {rectangle}{{{\color{red}rectangle}}}1
    {anchor}{{{\color{red}anchor}}}1
    {node}{{{\color{red}node}}}1
    {tcolorbox}{{{\color{verdeF}tcolorbox}}}1
    {eqnarray}{{{\color{verdeF}eqnarray}}}1
    {series=}{{{\color{verdeF}series=}}}1
    {resume}{{{\color{verdeF}resume}}}1
    {xscale}{{{\color{blue}xscale}}}1
    {tcbox}{{{\color{red}tcbox}}}1
    {newtcbox}{{{\color{red}newtcbox}}}1
    {tikz}{{{\color{red}tikz}}}1
     {newtcolorbox}{{{\color{red}newtcolorbox}}}1
    {tcboxmath}{{{\color{red}tcboxmath}}}1
    {varwidth}{{{\color{blue}varwidth}}}1
    {linewidth}{{{\color{blue}linewidth}}}1
    {headrulewidth}{{{\color{blue}headrulewidth}}}1
    {footrulewidth}{{{\color{blue}footrulewidth}}}1
    {headheight}{{{\color{blue}headheight}}}1
    {tcboxedtitleheight}{{{\color{blue}tcboxedtitleheight}}}1
    {tikzpicture}{{{\color{red}tikzpicture}}}1
    {textblock}{{{\color{red}textblock}}}1
    {tikzset}{{{\color{blue}tikzset}}}1
%emph={[2]\$,\$\$},
%emphstyle={[2]\color{red}\textbf},
}%fin lst
\newcommand{\wlatex}{\lstinline}

%---------------------------------------------------------------------------------
%  Código de programas (LaTeX en ese caso) con  Minted-
%---------------------------------------------------------------------------------
    
\usepackage{fancyvrb}
%\usepackage{minted}   %habilitar solo en Ubuntu (Linux) ya
\renewcommand{\theFancyVerbLine}{\sffamily
	\textcolor[rgb]{0,0,0.5}{\scriptsize
    \oldstylenums{\arabic{FancyVerbLine}}}}
%-----------------------------

%------------------------TEMPORAL: MINTED NO FUNC EN uBUNTU 14.04--------------
%From minted documentation ---- 
%\usemintedstyle{vs}%esquema de color
%\newmint{latex}{fontseries=b}
%Uso \latex/...../



%\newminted[wminted]{latex}{frame=lines,fontseries=b,formatcom=\color{wcgray}}
  %  uso \begin{wminted}...\end{wminted}
%\newminted[wVerbatim]{latex}{frame=lines,fontseries=b,formatcom=\color{wcgray}}

\newcommand{\bwm}{\begin{lstlisting}}
\newcommand{\ewm}{\end{lstlisting}}

%\newcommand{\bwm}{\begin{wminted}}
%\newcommand{\ewm}{\end{wminted}}











%--************************************************************-------------
%---------------------------------------------------------------------------
%CODIGO PARA EJEMPLOS-------------------------------------------------------


 % Ejemplo con \def
 \def\minorma(#1,#2,#3){\sqrt{#1^2+#2^2+#3^2}} 
 \def\lanorma#1{\minormaprevia(#1)}
 \def\minormaprevia(#1,#2,#3){\sqrt{#1^2+#2^2+#3^2}} 
 
 %ENTORNO TEOREMA
 %% En el preámbulo
\definecolor{colordominanteD}{RGB}{74,0,148}
\newcounter{tcbteorema}[chapter] % Contador
\renewcommand{\thetcbteorema}{\thechapter.\arabic{tcbteo}} % Formato 1.1,1.2,...

% Estilo "nodoTeorema" para nodos
\tikzset{nodoTeorema/.style={%
         rectangle,  top color=gray!5, bottom color=gray!5,
         inner sep=1mm,anchor=west,font=\small\bf\sffamily}
}

 % Caja de entorno
\newtcolorbox{cajaTeorema}[3][]{% 
  % Opciones generales
  arc=0mm,breakable,enhanced,colback=gray!5,boxrule=0pt,top=7mm,
  drop fuzzy shadow, fontupper=\normalsize,
  % label
  step and label={tcbteo}{#3},
overlay unbroken= {%
       % Borde superior grueso
     \draw[colordominanteD,line width=2.5cm] 
     ([xshift=1.25cm, yshift=0cm]frame.north west)--+(0pt,3pt);
       % Borde superior 1
     \draw[color=colordominanteD,line width=0.2pt] 
     (frame.north west)--([xshift=0pt]frame.north east);
       % Caja Teorema-contador
    \node[nodoTeorema](tituloteo) at ([xshift=0.2cm, yshift=-4mm]frame.north west)
    {\textbf{\color{colordominanteD} Teorema \thetcbteo \;#2}};               
},
overlay first = {
       % Borde superior grueso
     \draw[colordominanteD,line width=2.5cm] 
     ([xshift=1.25cm, yshift=0cm]frame.north west)--+(0pt,3pt);
       % Borde superior 1
     \draw[color=colordominanteD,line width=0.2pt] 
     (frame.north west)--([xshift=0pt]frame.north east);
       % Caja Teorema-contador
    \node[nodoTeorema](tituloteo) at ([xshift=0.2cm, yshift=-4mm]frame.north west)
    {\textbf{\color{colordominanteD} Teorema \thetcbteo \;#2}};   
                }, %First
  % Nada que mantener en los cambios de página 
overlay middle = { },
overlay last = { } 
#1}
%- Uso \begin{teorema}...  o \begin{teorema}[de tal] o \begin{teorema}[][ref]
\NewDocumentEnvironment{ejteorema}{O{} O{} O{}}{\bigskip\begin{cajaTeorema}{#1}{#2}%
 #3}{\end{cajaTeorema}\bigskip }
 

 
 % ejem LEMA -----------------------------------------------------------
\newtcolorbox[auto counter,number within=section]{cajalema}[2][]{
arc=0mm,breakable,enhanced,colback=gray!5,boxrule=0pt,
top=1mm, left=3pt,
fontupper={\small\bf\sffamily {\color{red}Lema \thetcbcounter \;#2}}~\normalfont, %"Lema..."+texto del cuerpo
overlay unbroken={%
  % Barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);           
                 },
overlay first  = {%barra vertical
\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);           
                },      
% Mantener borde en cambio de página   
overlay middle ={\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);   
                },
overlay last ={\draw[color=gray,line width=3pt] ([xshift=2pt] frame.north west)--([xshift=2pt] frame.south west);   
              }    
#1}
%-
\NewDocumentEnvironment{ejlema}{O{} O{}}{\smallskip\begin{cajalema}{#1}%
#2}{\end{cajalema}\smallskip }
%LEMA--------------------------------------------------------------
 
 
 %\usepackage{xparse}
\NewDocumentCommand{\mimpage}{ O{0.45} +m O{0.45} +m }{%
  \begin{minipage}{#1\textwidth}
  #2
  \end{minipage}%
  \hfill \begin{minipage}{#3\textwidth}
  #4
  \end{minipage}%
}
 
 \usepackage{varwidth}
 
 \newcommand{\msen}{{\rm sen}}
 
 
 % ENTORNOS SIMPLES    %Para jemplos del libro
 \usepackage{amsthm}
 %% ---1
\newtheorem{unteo}{Teorema}[section]
\newtheorem{unejem}{{Ejemplo}}[section] 
\newtheorem{unadefi}{Definición}[chapter]
 %% ---
 
 %%--
 \newtheoremstyle{estiloA} % nombre del estilo
  {}  % espacio  por encima del teorema. 
  {}  % espacio  por debajo del teorema. 
  {}  % fuente para el cuerpo del entorno 
  {}  % sangría
  {.} % puntuación después de encabezado
  {}  % espacio después de encabezado 
  {}  % Especifique manualmente el encabezado
  
\newtheoremstyle{estiloB}{}{}{}{} % 
  {\color{azulF}\bfseries} % fuente del encabezado
  {.}         % puntuación
  {\newline}  % espacio después del encabezado
  {\thmname{#1}~\thmnumber{\red #2}\thmnote{~\color{azulF}(#3)}}
  


 \theoremstyle{estiloB}
 \newtheorem{unadefiB}{Definición}[chapter]
 
 \newtheorem{unteoB}{Teorema}[section]
 
 
 \definecolor{rojoF}{RGB}{212,0,0}
 \newtheoremstyle{estiloC}{}{}{}{}% 
  {\blue\bfseries}%
  {.}{\newline}%
  {\thmname{#1}~\thmnumber{\color{rojoF} #2}\thmnote{~(#3)}}%
  %-
  \theoremstyle{estiloC}
  \swapnumbers % Intercambiar número-teorema
  \newtheorem{unteoC}{Teorema}
 
 %%--
 
   \newcounter{contaCaja}    % contador
  \setcounter{contaCaja}{1} % contador en 1
  \def\thecontaCaja{\thechapter.\arabic{contaCaja}}% Contador con # cápitulo
  \newenvironment{otraCaja}[1]{
   \bigskip
    \begin{tcolorbox}[
       blank,breakable,parbox=false,top=5pt,left=5pt,bottom=5pt, right=5pt,       
       overlay unbroken = {% 
       \draw[black,line width=0.5pt] ($(interior.north west)+( 0pt,-5pt)$) |-
                ($(interior.north)     +( 0pt, 4pt)$) -|
                ($(interior.north east)+( 0pt,-5pt)$);
            \node [black,fill=white] at ($(interior.north west)+(40pt, 4pt)$)
                   {\sffamily\bfseries #1  \thecontaCaja};
            \draw[black, line width=0.5pt] 
                ($(interior.south east)+( 0pt,10pt)$) |-
                ($(interior.south)     +( 0pt, 0pt)$) -|
                ($(interior.south west)+( 0pt,10pt)$);
            },
        overlay first={
            \draw[black,line width=0.5pt] ($(interior.north west)+( 0pt,-5pt)$) |-
                ($(interior.north)     +( 0pt, 4pt)$) -|
                ($(interior.north east)+( 0pt,-5pt)$);
            \node [black,fill=white] at ($(interior.north west)+(40pt, 4pt)$) {\sffamily\bfseries #1 \thecontaCaja};
            },
        overlay last={
            \draw[black,line width=0.5pt] ($(interior.south east)+( 0pt,10pt)$) |-
                ($(interior.south)     +( 0pt, 0pt)$) -|
                ($(interior.south west)+( 0pt,10pt)$);},
        ]
}{
    \end{tcolorbox}
    \bigskip
}


\newcounter{contaCajaB}    % contador
  \setcounter{contaCajaB}{1} % contador en 1
  \newenvironment{otraCajaB}[1]{
    \begin{tcolorbox}[%
       blank,breakable,parbox=false,top=6mm,left=5pt,bottom=5pt, right=5pt,      
       overlay unbroken = {% 
       \draw[draw=blue!15!white,line width=6mm] ($(interior.north west)+( 0pt,0pt)$) |-
                ($(interior.north)     +( 0pt, 0pt)$) -|
                ($(interior.north east)+( 0pt,0pt)$);
            \node [black,fill=white] at ($(interior.north west)+(40pt, 4pt)$)
                   {\sffamily\bfseries #1  \thecontaCajaB};
            \draw[draw=blue!15!white, line width=0.2mm] 
                ($(interior.south east)+( 0pt,10pt)$) |-
                ($(interior.south)     +( 0pt, 0pt)$) -|
                ($(interior.south west)+( 0pt,10pt)$);
            },
        overlay first={             
       \draw[draw=blue!15!white,line width=6mm] ($(interior.north west)+( 0pt,0pt)$) |-
                ($(interior.north)     +( 0pt, 0pt)$) -|
                ($(interior.north east)+( 0pt,0pt)$);
            \node [black,fill=white] at ($(interior.north west)+(40pt, 4pt)$)
                   {\sffamily\bfseries #1  \thecontaCajaB};
            },
        overlay last={
            \draw[draw=blue!15!white,line width=0.5pt] ($(interior.south east)+( 0pt,10pt)$) |-
                ($(interior.south)     +( 0pt, 0pt)$) -|
                ($(interior.south west)+( 0pt,10pt)$);},
                  ]%tcolorbox
}{
    \end{tcolorbox}
    \bigskip
}
%------------------- 
 
 
 
 
 
 
 
 
 
 
 
%********************************************************************************* 
%----------------------------------------------------------------------------------------
% Comandos del libro
%----------------------------------------------------------------------------------------
\newcommand{\latexcode}[1]{\begin{tcblisting}{colback=gray!5!white,colframe=gray!5!white,listing only}
#1
\end{tcblisting}}


\definecolor{styrmitcrfondocaja}{rgb}{0.92549, 0.92549, 1.}
\definecolor{styrmitcrnblue}{rgb}{.0,.0,.3}
\definecolor{styrmitcrnred}{rgb}{.8,.0,0}
\definecolor{styrmitcrngris1}{rgb}{.5,.5,.5}
\definecolor{styrmitcrngris2}{rgb}{.3,.3,.3}
\definecolor{styrmitcrorange1}{rgb}{.9,.24,.16}
\definecolor{styrmitcrorange2}{rgb}{0.91, 0.43, 0.0}
\definecolor{styrmitcryelloworange}{cmyk}{0, 0.42, 1 ,0}
\definecolor{styrmitcrbluefrance}{rgb}{0.1647, 0.4980, 1}
\definecolor{styrmitcrseudoindigo}{rgb}{0.345,0.1176,0.5490}
\definecolor{styrmitcrcelestetxt}{rgb}{0, 0.4, 1}
\definecolor{styrmitcrcitem}{rgb}{0.2, 0.5019, 1}

\definecolor{styrmitcrtitlecajainterior}{rgb}{0.2156, 0.4431, 0.7843}
\definecolor{styrmitcrbordecontenidointerior}{rgb}{0.1372, 0.1764, 0.4862} 
\definecolor{styrmitcrcontenidointerior}{rgb}{0.9764, 0.9764, 0.9762}

\definecolor{styrmitcrtxtgris}{rgb}{0.9568, 0.9333, 0.8431}
\definecolor{styrmitcrwcajagray}{rgb}{0.2,0.2,0.2}
\definecolor{styrmitcrwcgray1}{rgb}{0.2,0.2,0.2}
\definecolor{styrmitcrwcgray2}{rgb}{0,0.1333,0.3333}
\definecolor{styrmitcrwrojo}{rgb}{0.6078,0.019,0.141}
\definecolor{styrmitcrazulmathcode}{rgb}{0,0.2,0.6}
\definecolor{styrmitcrverdecomentario}{rgb}{0,0.5019,0}
\definecolor{styrmitcrazulmetal}{rgb}{0,0.54,0.72}
\definecolor{styrmitcrceleste}{rgb}{0.33,0.59,0.83}
\definecolor{styrmitcrshadecolor}{rgb}{0.7,0.82,1} 
\definecolor{styrmitcrverde}{rgb}{0,0.8,0.3}
\definecolor{colverbatim}{rgb}{.0,0.4,0.66}
\definecolor{colorcaja}{rgb}{0.9529, 0.94, 0.9137}

\definecolor{ngris2}{rgb}{.3,.3,.3}
\definecolor{ngris1}{rgb}{.5,.5,.5}
\definecolor{styrmitcrmiceleste}{rgb}{0.33,0.59,0.83}
\definecolor{miorange}{rgb}{0.91, 0.43, 0.0}
\definecolor{styrmitcrverdetxt}{rgb}{0,0.6313,}

\newcommand{\nblack}{\color{black}}
\newcommand{\ngris}{\color{styrmitcrngris1}}
\newcommand{\nblue}{\color{styrmitcrnblue}}
\newcommand{\col}[2]{\color{#1}{#2}\color{black}}
\newcommand{\nred}{\color{styrmitcrnred}}
\newcommand{\celeste}{\color{styrmitcrshadecolor}}
\newcommand{\wceleste}{\color{styrmitcrmiceleste}}
\newcommand{\colr}[1]{\color{red}{#1}\color{black}}
\newcommand{\colrb}[1]{\color{red}{\wn{#1}}\color{black}}
\newcommand{\colb}[1]{\color{blue}{#1}\color{black}}
\newcommand{\wblue}[1]{{\blue #1}}
\newcommand{\wred}[1]{{\red #1}}

\newcommand{\wredb}[1]{{\red \wn{#1}}}

\newcommand{\nverde}{\color{styrmitcrverdecomentario}}
\newcommand{\wverde}{\color{styrmitcrverdecomentario}}
\newcommand{\wVerdeComentario}{\color{styrmitcrverdecomentario}}
\newcommand{\wcvc}{\color{styrmitcrverdecomentario}}
\newcommand{\wmcode}{\color{styrmitcrazulmathcode}}
\newcommand{\wcitem}{\color{styrmitcrcitem}}
\newcommand{\wcrojo}{\color{styrmitcrazulmetal}}
\newcommand{\wgray}{\gray!90}
\newcommand{\wvt}{\colornotas}
\newcommand{\wcelestetxt}{\color{styrmitcrcelestetxt}}
%\newcommand{\wccaja}{\color{wcolorcaja}} %caja de ejemplo
%\newcommand{\wccajagray}{\color{wcolorcajagray}}%caja de contenido
\newcommand{\clrv}{\color{styrmitcrseudoindigo}}
\newcommand{\wblueFrance}{\color{styrmitcrbluefrance}}
\definecolor{AzulMathCode}{rgb}{0,0.2,0.6}
\definecolor{wcgray}{rgb}{0,0.1333,0.3333}




\newcommandx\coord[3][1=1, 3=n]{(#2_{#1},\ldots,#2_{#3})} %(x1,x2,...,xn)
\newcommandx\seq[3][1=1, 3=n]{#2_{#1},\ldots,#2_{#3}}%x1,x2,....xn
\newcommandx\setseq[3][1=1, 3=n]{\{#2_{#1},\ldots,#2_{#3}\}} %{x1,x2,...,xn}
%$\seq{x}$       --->(x1, . . . , xn)
%$\seq[0]{y}$    --->(y0, . . . , yn)
%$\seq{z}[m]$    --->(z1, . . . , zm)
%$\seq[0]{t}[m]$ --->(t0, . . . , tm)
\newcommandx\mpage[4][1=0.45,2=0.45]{\begin{minipage}[b]{#1 \textwidth} #3
\end{minipage}
\  \ \hfill \begin{minipage}[b]{#2 \textwidth} #4
\end{minipage}}
\newcommandx\mpageb[4][1=0.45,2=0.45]{\begin{minipage}[b]{#1 \textwidth} #3
\end{minipage}
\  \ \hfill \begin{minipage}[b]{#2 \textwidth} #4
\end{minipage}}%\mpage[0.7][0.2]{}{}
\newcommandx\mpagec[4][1=0.45,2=0.45]{\begin{minipage}[c]{#1 \textwidth} #3
\end{minipage}
\  \ \hfill \begin{minipage}[c]{#2 \textwidth} #4
\end{minipage}}%\mpage[0.7][0.2]{}{}
\newcommandx\mpagetc[4][1=0.45,2=0.45]{\begin{minipage}[c]{#1 \textwidth} #3
\end{minipage}
\  \ \hfill \begin{minipage}[t]{#2 \textwidth} #4
\end{minipage}}%\mpage[0.7][0.2]{}{}

\newcommand{\wle}{\left}
\newcommand{\wri}{\right}
\newcommand{\wba}{\begin{array}}
\newcommand{\wea}{\end{array}}
%Comandos generales %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\ptt}[1]{{\tt #1}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Co}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\I}{\mathbb{I}}
\newcommand{\F}{\mathbb{F}}
%parte entera
\newcommand{\pint}[1]{\left\llbracket #1 \right\rrbracket}
\newcommand{\pintf}[1]{\llfloor #1 \rrfloor}
\newcommand{\pintc}[1]{\llceil #1 \rrceil}
\newcommand{\x}{\cdot}
\def\max{\mathop{\mbox{\rm m\'ax}}} %máx
\def\min{\mathop{\mbox{\rm m\'{\i}n}}}
\newcommand{\wmbox}[1]{\;\;\;\mbox{#1}\;\;\;}
\newcommand{\es}{\in \,}
\newcommand{\raya}{\rule{2cm}{0.01cm}\\}
\newcommand{\p}[1]{$\,#1\,$} %uso: $\, x \,$ es \mt{x}
\newcommand{\mt}[1]{$\,#1\,$} %uso: $\, x \,$ es \mt{x}
\newcommand{\gfrac}[2]{\displaystyle{\frac{#1}{#2}}} %uso: $\, x \,$ es \mt{x}
\newcommand{\limite}[2]{\lim_{#1 \rightarrow #2}}
\newcommand{\esp}{\vspace{0.4cm}}
\newcommand{\ds}{\displaystyle}
\newcommand{\sen}{\mathop{\rm sen}\nolimits}
\newcommand{\senh}{\mathop{\rm senh}\nolimits}
\newcommand{\arcsen}{\mathop{\rm arcsen}\nolimits}
\newcommand{\arcsec}{\mathop{\rm arcsec}\nolimits}
\newcommand{\bc}{\begin{center}}
\newcommand{\ec}{\end{center}}
\newcommand{\be}{\begin{enumerate}}
\newcommand{\ee}{\end{enumerate}}
\newcommand{\bt}{ \begin{tabular}}
\newcommand{\et}{ \end{tabular}}
\newcommand{\mcd}{\,\mbox{\rm mcd}\,}
\newcommand{\rem}{\,\mbox{\rm rem}\,}
\newcommand{\mcm}{\,\mbox{\rm mcm}\,}
\newcommand{\md}{\mbox{\rm mod}}
\newcommand{\rmd}[2]{#1 \;\mbox{\rm mod}\; #2}
\newcommand{\MCD}[3]{$\;\mbox{\rm mcd}\left(#1,#2\right)\,#3\;$}
\newcommand{\MCDm}[3]{\;\mbox{\rm mcd}\left(#1,#2\right)\,#3\;}
\newcommand{\cgr}[3]{#1 \equiv #2\;(\mbox{\rm mod}\;#3)}
\newcommand{\ncgr}[3]{#1 \not\equiv #2\;(\mbox{mod}\;#3)}
\newcommand{\ord}[2]{\mbox{\rm Ord}_{#1}(#2)}
\newcommand{\ind}[2]{\mbox{\rm Ind}_{#1}(#2)}
\def\max{\mathop{\mbox{\rm m\'ax}}} %máx
\def\min{\mathop{\mbox{\rm m\'{\i}n}}}
\newcommand{\fp}[2]{\ds{|#1 \atop \overline{#2 \;}|}}%fraccion parcial
\newcommand{\intt}[2]{\ds{\int {#1}\;dx}}
\newcommand{\inttt}[3]{\ds{\int_{#1}^{#2}{#3}\;dx}}
\newcommand{\ngr}[1]{\boldsymbol{#1}}
\newcommand{\implD}{{\nblue``$\Rightarrow$'':\;}}
\newcommand{\implI}{{\nblue``$\Leftarrow$'':\;}}
\newcommand{\inclD}{{\nblue``$\subseteq$'':\;}}
\newcommand{\inclI}{{\nblue``$\supseteq$'':\;}}
\newcommand{\solu}{ {\nblue \fhvb{Solución:}}\;\nblack}
\newcommand{\prueba}{{\it \OLIVEGREEN Prueba:}\;}
\newcommand{\Lsy}[2]{\left(\gfrac{#1}{#2}\right)}
\newcommand{\dep}[2]{\,\gfrac{\partial #1}{\partial #2}\,}
\newcommand{\bn}{\begin{enumerate}}
\newcommand{\en}{\end{enumerate}}
\newcommand{\grande}[1]{{\mbox{{\Large {\it #1}}}}}%e grande
\newcommand{\woverrightarrow}[1]{\;\mbox{\boldmath$\overrightarrow{#1}$}}
\newcommand{\fl}{\rightarrow}
\newcommand{\Fl}{\longrightarrow}%
\newcommand{\1}{\'{\i}}
\newcommand{\ent}{\;\;\Longrightarrow\;\;}%
\newcommand{\bebaz}{\begin{enumerate}[label=\itembolasazules{\arabic*}]}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\intd}[2]{\displaystyle{\iint_{#1} #2\,dA}}
\newcommand{\intdd}[7]{\displaystyle{\int_{#1}^{#2}\! \int_{#3}^{#4} #5\, #6 \,#7}}
\newcommand{\intddd}[7]{\displaystyle{\int_{#1}^{#2} \left[\int_{#3}^{#4} #5\, #6\right] \,#7}}
\newcommand{\wcib}{\wblue{[}}
\newcommand{\wcdb}{\wblue{]}}
\newcommand{\wdpb}[2]{\gfrac{\wblue{\partial}}{\wblue{\partial} #1}\wblue{\left[ {\black #2} \right]}}
\newcommand{\dprz}[1]{\gfrac{\partial z}{\partial #1}}
\newcommand{\dpr}[2]{\gfrac{\partial #1}{\partial #2}}
\newcommand{\ddpr}[3]{\gfrac{\partial^2 #1}{\partial #2 \partial #3}}
\newcommand{\ddprz}[2]{\gfrac{\partial^2 z}{\partial #1 \partial #2}}
\newcommand{\wdp}[2]{\gfrac{\partial #1}{\partial #2}}
\newcommand{\wdpr}[2]{\gfrac{{\red \partial}}{{\red \partial #2}}\left[{\blue #1 }\right]}
\newcommand{\wdpdp}[3]{\gfrac{\partial^2 #1}{\partial #2 \partial #3}}
\newcommand{\wdpdpr}[3]{\gfrac{{\red \partial^2}}{{\red \partial #2\partial #3}}\left[{\blue #1 }\right]}
\newcommand{\wddp}[2]{\gfrac{\partial^2 #1}{\partial #2^2}}
\newcommand{\wddpr}[2]{\gfrac{{\red \partial^2} }{{\red \partial #2^2}}\left[ {\blue #1 } \right]}
\newcommand{\wb}[1]{{\blue #1}}

%%%%%%%%%%%%%%%%%%%%%%%%%% Comandos adicionales %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\wnorm}[1]{\left\| #1 \right\|}
\newcommand{\nni}{\pmb{\widehat{\imath}}}
\newcommand{\nj}{\pmb{\widehat{\jmath}}}
\newcommand{\nk}{\pmb{\widehat{k}}}
\newcommand{\wvct}[1]{\pmb{\widehat{#1}}}

\newcommand{\nvct}[1]{$\pmb{\overrightarrow{#1}}$}
\newcommand{\vct}[1]{\pmb{\overrightarrow{#1}}}
%\newcommand{\vv}{\overrightarrow{v}}
\newcommand{\vu}{\overrightarrow{u}}
\newcommand{\vw}[1]{\overrightarrow{w}}

% \newcommand{\proy}[2]{\ds{\mbox{\rm proy}_{_{\ds \overrightarrow{\colb{#2}}}}^{^{\ds{\overrightarrow{#1}}}} }}

\newcommand{\proy}[2]{\ds{\mbox{proy\,}_{\ds\vv{#2}}^{\ds\vv{#1}}}}

\newcommand{\proyp}[2]{\ds{\mbox{\rm proy}_{_{\ds \colb{#2}}}^{^{\ds{\overrightarrow{#1}}}} }}
\newcommand{\proysmall}[2]{\ds{\mbox{\rm proy}_{_{ \overrightarrow{\colb{     #2}}}}^{^{{\overrightarrow{#1}}}} }}

\newcommand{\mllave}[3]{\left\{\begin{array}{lcl}
                         #1 \\
                         #2\\
                         #3\\
                        \end{array}\right.
}


\newcommand{\wn}[1]{\textbf{\texttt{#1}}}
\newcommand{\wnv}[1]{{\wverde\textbf{\texttt{#1}}}}
\newcommand{\wnb}[1]{{\blue\textbf{\texttt{#1}}}}
\newcommand{\wnr}[1]{{\red\textbf{\texttt{#1}}}}

\newcommand{\wrr}[1]{{\red #1}}
\newcommand{\xr}{{\red x}}
\newcommand{\yr}{{\red y}}
\newcommand{\zr}{{\red z}}
\newcommand{\xb}{{\blue x}}
\newcommand{\yb}{{\blue y}}
\newcommand{\zb}{{\blue z}}
\newcommand{\wbslash}{{\blue\textbf{\texttt{\char`\\}}}}
\newcommand{\wslash}{{\textbf{\texttt{\char`\\}}}}
\newcommand{\wnbv}[2]{\wbslash\wnb{#1}\wn{\{}\wnv{#2}\wn{\}}}
\newcommand{\wnbnnv}[3]{\wbslash\wnb{#1}\wn{\{}#2\wn{\}}\wn{\{}\wnv{#3}\wn{\}}}
\newcommand{\wnbnv}[3]{\wbslash\wnb{#1}\wn{[#2]}\wn{\{}\wnv{#3}\wn{\}}}
\newcommand{\wnvv}[1]{{\wverde\wslash\textbf{\texttt{#1}}}}
\newcommand{\wnnb}[1]{{\nblue\wslash\textbf{\texttt{#1}}}}


\newcommand{\sbibi}{{\tt\char`\\\char`\\}}
\newcommand{\sbi}[1]{{\tt\blue\char`\\#1}}
\newcommand{\bi}[1]{\wbftt{\blue\char`\\#1}}
\newcommand{\wbi}[1]{{\wbftt{\blue\char`\\#1}}} %\wbi{begin}->\begin (en azul) en texto
\newcommand{\wbin}[2]{{\blue\wbftt{\char`\\#1}}{\tt #2}} %\wbin{begin}{center}->\begin{center} 
\newcommand{\wbinc}[2]{{\blue {\tt\char`\\#1}}{\wverde\tt #2}} %\wbin{begin}{center}->\begin{center} 
\newcommand{\wbig}[1]{{\tt\char`\\#1}} %\wbin{begin}{center}->\begin{center}        
\newcommand{\wcom}[1]{\wVerdeComentario \%#1}% Uso el LibroLaTeX: /wcom[ texto]
\newcommand{\bic}[1]{{\wverde \textbf{\texttt{\char`\\#1}}}}
\newcommand{\bia}[1]{{\wcitem \tt\char`\\#1}}

\newcommand{\wbegin}[1]{\wbin{begin}{\{#1\}}}
\newcommand{\wend}[1]{\wbin{end}{\{#1\}}}
\newcommand{\wcbegin}[1]{\wnbv{begin}{#1}}
\newcommand{\wcend}[1]{\wnbv{end}{#1}}
\newcommand{\wusepackage}[1]{\wnbv{usepackage}{#1}}
\newcommand{\wdocumentclass}[1]{\wnbv{documentclass}{#1}}
\newcommand{\wincludegraphics}[1]{\wnbv{includegraphics}{#1}}
\newcommand{\woincludegraphics}[2]{\wnbnv{includegraphics}{#1}{#2}} 
\newcommand{\wusepackageop}[1]{\wnbnv{usepackage}{T1}{#1}}


\newcommand{\bdc}{\wbi{documentclass}}
\newcommand{\bdcc}[1]{\wnbv{documentclass}{#1}}
\newcommand{\bedc}{\wnbv{documentclass}{beamer}}

\newcommand{\bdcm}{\wnbv{begin}{document}}
\newcommand{\edcm}{\wnbv{end}{document}}

\newcommand{\bframe}{\wnbv{begin}{frame}}
\newcommand{\eframe}{\wnbv{end}{frame}}

\newcommand{\ben}{\wnbv{begin}{enumerate}}
\newcommand{\een}{\wnbv{end}{enumerate}}

\newcommand{\beq}{\wnbv{begin}{equation}}
\newcommand{\eeq}{\wnbv{end}{equation}}

\newcommand{\beqna}{\wnbv{begin}{eqnarray}}
\newcommand{\eeqna}{\wnbv{end}{eqnarray}}
\newcommand{\beqnat}{\wnbv{begin}{eqnarray*}}
\newcommand{\eeqnat}{\wnbv{end}{eqnarray*}}

%\begin{align*}
\newcommand{\balignt}{\wnbv{begin}{align*}}
\newcommand{\ealignt}{\wnbv{end}{align*}}

%\begin{subequations}
\newcommand{\bseq}{\wnbv{begin}{subequations}}
\newcommand{\eseq}{\wnbv{end}{subequations}}

\newcommand{\barray}{\wnbv{begin}{array}}
\newcommand{\earray}{\wnbv{end}{array}}

%\newcommand{\bcen}{\wbi{begin}\{{center}\}}
%\newcommand{\ecen}{\wbi{end}\{{center}\}}

\newcommand{\btable}{\wnbv{begin}{table}}
\newcommand{\etable}{\wnbv{end}{table}}


\newcommand{\bfigure}{\wnbv{begin}{figure}}
\newcommand{\efigure}{\wnbv{end}{figure}}


\newcommand{\wparbox}[2]{\wnbnnv{parbox}{#1}{#2}}


\newcommand{\btab}{\wnbv{begin}{tabular}}
%\newcommand{\btabb}[1]{\btab\wn{\{#1\}}}
\newcommand{\etab}{\wnbv{end}{tabular}}

\newcommand{\bltab}{\wnbv{begin}{longtable}}
%\newcommand{\btabb}[1]{\btab\wn{\{#1\}}}
\newcommand{\eltab}{\wnbv{end}{longtable}}

%\newcommand{\bminip}{\wbi{begin}\{{\wverde minipage}\}}
%\newcommand{\eminip}{\wbi{end}\{{\wverde minipage}\}}

%\begin{block}
\newcommand{\bblock}{\wnbv{begin}{block}}
\newcommand{\eblock}{\wnbv{end}{block}}

%\begin{block}
\newcommand{\bsemiverbatim}{\wnbv{begin}{semiverbatim}}
\newcommand{\esemiverbatim}{\wnbv{end}{semiverbatim}}

\newcommand{\wfboxsep}{\wbi{fboxsep}}
\newcommand{\wfcolorbox}{\wbi{fcolorbox}}

\newcommand{\lli}{\wbftt{\red \{}}
\newcommand{\lld}{\wbftt{\red \}}}

\newcommand{\whspace}{\wnvv{hspace}}
\newcommand{\wvspace}{\wnvv{vspace}}



\newcommand{\wleft}{\wnvv{left}}
\newcommand{\wright}{\wnvv{right}}

\newcommand{\wleftll}{\wnvv{left}{\red\bi{\{}}}
\newcommand{\wrightpto}{\wnvv{right}{\red .}}

\newcommand{\wintertext}{\wnvv{intertext}}
\newcommand{\wwmbox}{\wnvv{mbox}}

\newcommand{\bsideways}{\wnbv{begin}{sideways}}
\newcommand{\esideways}{\wnbv{end}{sideways}}

\newcommand{\wcellcolor}{\wnvv{cellcolor}}
%\rowcolors
\newcommand{\wrowcolors}{\wnvv{rowcolors}}
%\multicolumn
\newcommand{\wmulticolumn}{\wnvv{multicolumn}}

%\scalebox
\newcommand{\wscalebox}{\wnvv{scalebox}}

%\includegraphics
\newcommand{\wwincludegraphics}{\wnvv{includegraphics}}

%¿#red & ?

%\subfigure
\newcommand{\wsubfigure}{\wnvv{subfigure}}
%\usepackage
\newcommand{\wwusepackage}{\wnnb{usepackage}}
%\DeclareGraphicsExtensions
\newcommand{\wDeclareGraphicsExtensions}{\wnvv{DeclareGraphicsExtensions}}

%\newboxedtheorem
\newcommand{\wnewboxedtheorem}{\wnnb{newboxedtheorem}}

\newcommand{\wnewcom}[2]{\wnbv{#1}{\wnvv{#2}}}
\newcommand{\wnewcomm}[3]{\wnbv{#1}{\wnvv{#2}}\wbftt{#3}}

\newcommand{\bcen}{\wnbv{begin}{center}}
\newcommand{\ecen}{\wnbv{end}{center}}
\newcommand{\bminip}[2]{\wnbv{begin}{minipage}#1#2}
\newcommand{\eminip}{\wnbv{end}{minipage}}
\newcommand{\wref}[2]{\hyperref[#2]{#1 \ref*{#2}}}

% #wn¿#{#red  #}?
% #wn¿ ?

\newcommand{\fnteb}[1]{\fnt[pag][11]{\textbf{#1}}}
\newcommand{\margen}[1]{\hspace*{-2.8cm}\fnt[pag][11]{#1}}
\newcommand{\margenbf}[1]{\hspace*{-2.8cm}\fnt[pag][11]{\textbf{#1}}}
%\wparbox[5cm][4cm]{----}{----}
\newcommandx*\wwparbox[4][1=9cm,2=9cm]{
\parbox{#1}{#3}\parbox{#2}{#4}
}
\newcommand{\itemptomv}{\item[\ptomv]}



\newcommand{\bftt}[1]{{\blue\textbf{\texttt{#1}}} }
\newcommand{\wbftt}[1]{{\black\textbf{\texttt{#1}}} }


\newcommand{\sumauk}[2]{\ds\sum_{k=#1}^{#2} u_k}
\newcommand{\wtt}[1]{{\texttt{\textbf{#1}}}}
\newcommand{\wvec}[1]{\overrightarrow{#1}}
\newcommand{\wvecb}[1]{{\blue\overrightarrow{#1}}} % azul




%% Code ejemplos
\newcommand{\codeinternet}[1]{%
\hfill\href{http://www.tec-digital.itcr.ac.cr/revistamatematica/Libros/LATEX/code2013/#1}{
\includegraphics[scale=0.10]{images/internet}\fhv{8}{Descargar archivo .tex}}
}
%--------------------------------------------------------------------------------
\newcommand{\stodo}[1]{\todo[color=LightBlue1,size=\small]{\nfnt[pag][10]{#1}}}
\newcommand{\sstodo}[1]{\todo[color=LightBlue1,size=\small]{\nfnt[pag][9]{#1}}}
\newcommand{\ssstodo}[1]{\todo[color=LightBlue1,size=\small]{\nfnt[pag][8]{#1}}}




% #wn¿#{#red  #}?
% #wn¿ ?
%--------------------------------------------------------------------------------------------------------------------------------
\definecolor{verbmentsbgcolor}{rgb}{0.9764, 0.9764, 0.9762}
\definecolor{verbmentscaptionbgcolor}{rgb}{0.1647, 0.4980, 1}
\usepackage{verbments}
\fvset{frame=bottomline,framerule=0.01cm}
\plset{language=java,texcl=true,style=vs,%
listingnamefont=\sffamily\bfseries\color{white},%
bgcolor=verbmentsbgcolor,captionfont=\sffamily\color{white},%
captionbgcolor=verbmentscaptionbgcolor, listingname=\textbf{Programa}}
%Entorno

%\definecolor{verbmentsbgcolor}{rgb}{0.9764, 0.9764, 0.9762}
%\definecolor{verbmentscaptionbgcolor}{rgb}{0.1647, 0.4980, 1}
%\usepackage{verbments}
%--------------------------------------------------------------------------------------------------------------------------------

\usepackage{makeidx}
\makeindex
\newcommand{\formatoindex}[1]{\textbf{\hyperpage{#1}}}




%% Figuras y texto
\newcommand{\cuatrofiguras}[4]{
\begin{minipage}{0.9\textheight}
  \begin{minipage}{.2\textheight}
  \bc
    #1
    \ec
  \end{minipage}%
  \begin{minipage}{.2\textheight}
    \bc 
    #2
    \ec
  \end{minipage}%
  \begin{minipage}{.2\textheight}
    \bc 
    #3
    \ec
  \end{minipage}%
  \begin{minipage}{.2\textheight}
    \bc #4
    \ec
  \end{minipage}%
  \end{minipage}%
}



\newcommand{\tresfiguras}[3]{
\begin{minipage}{\textheight}
  \begin{minipage}[b]{.28\textheight}
    \bc
    #1
    \ec
  \end{minipage}%
  \begin{minipage}[b]{.28\textheight}
    \bc
    #2
    \ec
  \end{minipage}%
  \begin{minipage}[b]{.28\textheight}
    \bc
    #3
    \ec
  \end{minipage}%
  \end{minipage}%
  }

  
  


\newcommand{\dosfiguras}[2]{
\begin{minipage}{\textheight}
  \begin{minipage}[b]{.4\textheight}
    \bc
    #1
    \ec
  \end{minipage}%
  \begin{minipage}[b]{.4\textheight}
    \bc
    #2
    \ec
  \end{minipage}%
  \end{minipage}%
}

\newcommand{\wdosfiguras}[4]{
\begin{minipage}{0.9\textheight}
  \begin{minipage}[b]{#1}
    
    #3
    
  \end{minipage}%
  \begin{minipage}[b]{#2}
    
    #4
    
  \end{minipage}%
  \end{minipage}%
}


\newcommand{\figtxt}[4]{
\begin{minipage}{\textheight}
  \begin{minipage}{#1}
    #3
  \end{minipage}%
  \begin{minipage}{#2}
    #4
  \end{minipage}%
  \end{minipage}%
}

\newcommand{\unafigura}[1]{
\begin{minipage}{\textheight}
#1
\end{minipage}%
}

\newcommand{\regla}{{\white \rule{0.001cm}{0.2cm}}}





